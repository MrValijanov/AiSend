<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <title>AiSend ¬∑ Chegarasiz to‚Äòlovlar (demo)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020712;
      --bg-card: #050d1a;
      --bg-soft: #0b1728;
      --accent: #22c55e;
      --accent-soft: #bbf7d0;
      --accent-dark: #15803d;
      --danger: #fb7185;
      --text: #f9fafb;
      --text-soft: #9ca3af;
      --border: rgba(148, 163, 184, 0.3);
      --radius-xl: 22px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont,
        "SF Pro Text", "Roboto", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%, #020617 100%);
      color: var(--text);
    }

    .app {
      max-width: 480px;
      margin: 0 auto;
      padding: 16px 14px 24px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* HEADER */

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .logo-wrap {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-badge {
      width: 40px;
      height: 40px;
      border-radius: 18px;
      background: radial-gradient(circle at 30% 20%, #bbf7d0 0, #22c55e 40%, #14532d 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 20px;
      color: #022c22;
      box-shadow: 0 0 24px rgba(34, 197, 94, 0.5);
    }

    .logo-title-main {
      font-size: 22px;
      font-weight: 700;
    }

    .logo-title-sub {
      font-size: 11px;
      color: var(--text-soft);
      margin-top: 2px;
    }

    .profile-chip {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.9);
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .profile-chip span {
      font-size: 10px;
      color: var(--text-soft);
    }

    /* BALANCE */

    .balance-card {
      background: radial-gradient(circle at top, #0b1929 0, #020617 55%, #020617 100%);
      border-radius: 26px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      padding: 16px 16px 14px;
      box-shadow: 0 20px 48px rgba(0, 0, 0, 0.7);
      margin-bottom: 12px;
    }

    .balance-label {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(148, 163, 184, 0.9);
      margin-bottom: 6px;
    }

    .balance-row {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 6px;
    }

    .balance-main {
      font-size: 26px;
      font-weight: 700;
    }

    .balance-currency {
      font-size: 13px;
      color: var(--text-soft);
      margin-left: 4px;
    }

    .balance-change {
      font-size: 11px;
      color: #4ade80;
      background: rgba(22, 163, 74, 0.15);
      border-radius: 999px;
      padding: 3px 8px;
    }

    .balance-expand {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      padding: 8px 10px;
      border-radius: 16px;
      background: rgba(15, 23, 42, 0.75);
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .balance-expand-label {
      font-size: 12px;
      color: var(--text-soft);
    }

    .balance-expand-arrow {
      font-size: 14px;
      color: var(--text-soft);
    }

    .assets-panel {
      margin-top: 8px;
      padding: 10px 10px 6px;
      border-radius: 18px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
      display: none;
    }

    .assets-panel.active {
      display: block;
    }

    .asset-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .asset-label {
      font-size: 12px;
      color: var(--text-soft);
    }

    .asset-value {
      font-size: 13px;
      font-weight: 500;
    }

    .asset-tag {
      font-size: 10px;
      color: #a5b4fc;
    }

    /* MAIN MENU */

    .main-menu {
      margin-top: 10px;
      margin-bottom: 12px;
    }

    .main-menu-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      margin-bottom: 10px;
    }

    .menu-btn {
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: rgba(15, 23, 42, 0.96);
      padding: 9px 4px;
      text-align: center;
      font-size: 11px;
      color: var(--text-soft);
      cursor: pointer;
    }

    .menu-btn.active {
      border-color: var(--accent);
      background: radial-gradient(circle at top, #16a34a 0, #052e16 50%, #020617 100%);
      color: var(--accent-soft);
      box-shadow: 0 12px 28px rgba(22, 163, 74, 0.5);
    }

    .menu-btn-title {
      font-size: 11px;
      font-weight: 600;
    }

    /* Chegarasiz to'lovlar tile */

    .borderless-card {
      border-radius: 24px;
      padding: 14px 14px 14px;
      background: radial-gradient(circle at top left, #064e3b 0, #020617 55%, #000 100%);
      border: 1px solid rgba(74, 222, 128, 0.6);
      box-shadow: 0 14px 36px rgba(22, 163, 74, 0.7);
      margin-bottom: 14px;
      cursor: pointer;
    }

    .borderless-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .borderless-sub {
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 8px;
    }

    .borderless-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 11px;
    }

    .borderless-tag {
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(187, 247, 208, 0.8);
      color: #bbf7d0;
      background: rgba(6, 95, 70, 0.7);
    }

    /* PAGES WRAP */

    .pages {
      flex: 1;
    }

    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    .page-card {
      border-radius: 24px;
      padding: 16px 14px 16px;
      background: radial-gradient(circle at top, #020617 0, #020617 60%, #000 100%);
      border: 1px solid rgba(55, 65, 81, 0.9);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.7);
      margin-bottom: 12px;
    }

    .page-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .page-sub {
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 12px;
    }

    .field {
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-size: 12px;
      margin-bottom: 4px;
      color: var(--text-soft);
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: rgba(15, 23, 42, 0.96);
      padding: 10px 11px;
      color: var(--text);
      font-size: 13px;
      outline: none;
    }

    input:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.35);
    }

    select {
      appearance: none;
      background-image: linear-gradient(45deg, transparent 50%, #9ca3af 50%),
        linear-gradient(135deg, #9ca3af 50%, transparent 50%);
      background-position: calc(100% - 14px) 12px, calc(100% - 10px) 12px;
      background-size: 6px 6px, 6px 6px;
      background-repeat: no-repeat;
    }

    .btn {
      width: 100%;
      border-radius: 999px;
      border: none;
      padding: 12px 16px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(90deg, #22c55e, #a3e635);
      color: #022c22;
      box-shadow: 0 16px 40px rgba(22, 163, 74, 0.7);
      margin-top: 4px;
    }

    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 10px 24px rgba(22, 163, 74, 0.5);
    }

    .btn-secondary {
      background: rgba(15, 23, 42, 0.95);
      color: var(--text-soft);
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow: none;
    }

    .info-line {
      font-size: 12px;
      color: var(--text-soft);
      margin-top: 6px;
    }

    .info-line strong {
      color: var(--accent-soft);
    }

    .info-error {
      font-size: 12px;
      color: var(--danger);
      margin-top: 4px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }

    .pill {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: var(--text-soft);
    }

    .pill.good {
      border-color: rgba(34, 197, 94, 0.7);
      color: var(--accent-soft);
    }

    .footer-note {
      font-size: 11px;
      color: var(--text-soft);
      text-align: center;
      margin-top: 8px;
    }

    /* PROFILE MODAL */

    .modal-bg {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(10px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 40;
    }

    .modal-bg.active {
      display: flex;
    }

    .modal {
      width: 100%;
      max-width: 360px;
      border-radius: 22px;
      padding: 14px 14px 16px;
      background: radial-gradient(circle at top, #020617 0, #020617 55%, #000 100%);
      border: 1px solid rgba(148, 163, 184, 0.8);
      box-shadow: 0 20px 48px rgba(0, 0, 0, 0.8);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .modal-title {
      font-size: 16px;
      font-weight: 600;
    }

    .modal-close {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      cursor: pointer;
      color: var(--text-soft);
    }

    .modal-row {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin: 4px 0;
    }

    .modal-row label {
      margin: 0;
      color: var(--text-soft);
      font-size: 12px;
    }

    .modal-row span {
      font-weight: 500;
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="logo-wrap">
        <div class="logo-badge">A</div>
        <div>
          <div class="logo-title-main">AiSend</div>
          <div class="logo-title-sub">Chegarasiz to‚Äòlovlar ¬∑ demo</div>
        </div>
      </div>
      <button class="profile-chip" id="profileBtn">
        <span id="profileName">Guest</span>
        <span>Profil</span>
      </button>
    </header>

    <section class="balance-card">
      <div class="balance-label">TOTAL BALANCE</div>
      <div class="balance-row">
        <div>
          <span class="balance-main" id="totalBalanceDisplay">0</span>
          <span class="balance-currency">UZS (demo)</span>
        </div>
        <div class="balance-change" id="balanceChangeTag">
          +0.0% (demo)
        </div>
      </div>

      <div class="balance-expand" id="assetsToggle">
        <div class="balance-expand-label">Barcha aktivlar</div>
        <div class="balance-expand-arrow" id="assetsArrow">‚ñº</div>
      </div>

      <div class="assets-panel" id="assetsPanel">
        <div class="asset-row">
          <div>
            <div class="asset-label">Fiat balans (UZS)</div>
            <div class="asset-tag">Karta / hisob</div>
          </div>
          <div class="asset-value" id="assetFiatUzs">0 UZS</div>
        </div>
        <div class="asset-row">
          <div>
            <div class="asset-label">Fiat balans (KZT)</div>
            <div class="asset-tag">Ichki balans (demo kurs)</div>
          </div>
          <div class="asset-value" id="assetFiatKzt">0 KZT</div>
        </div>
        <div class="asset-row">
          <div>
            <div class="asset-label">Crypto (USDT ekv.)</div>
            <div class="asset-tag">Demo portfel</div>
          </div>
          <div class="asset-value" id="assetCrypto">0 USDT</div>
        </div>
        <div class="asset-row">
          <div>
            <div class="asset-label">Stocks (demo)</div>
            <div class="asset-tag">S&P 500 / Tech</div>
          </div>
          <div class="asset-value" id="assetStocks">0 USD</div>
        </div>
      </div>
    </section>

    <section class="main-menu">
      <div class="main-menu-row">
        <button class="menu-btn active" data-page="send" id="menuSend">
          <div class="menu-btn-title">Send</div>
        </button>
        <button class="menu-btn" data-page="exchange" id="menuExchange">
          <div class="menu-btn-title">Exchange</div>
        </button>
        <button class="menu-btn" data-page="crypto" id="menuCrypto">
          <div class="menu-btn-title">Crypto</div>
        </button>
        <button class="menu-btn" data-page="stocks" id="menuStocks">
          <div class="menu-btn-title">Stocks</div>
        </button>
      </div>
    </section>

    <section class="borderless-card" id="borderlessCard">
      <div class="borderless-title">Chegarasiz to‚Äòlovlar</div>
      <div class="borderless-sub">
        Rusiyada tursangiz ham O‚Äòzbekistondagi kommunal yoki mobil to‚Äòlovni
        bir zumda, past komissiya bilan to‚Äòlash (demo konsept).
      </div>
      <div class="borderless-tags">
        <span class="borderless-tag">‚ö° Real time konvertatsiya</span>
        <span class="borderless-tag">üåç Multi-valyuta</span>
        <span class="borderless-tag">üí° KYC bilan full versiya</span>
      </div>
    </section>

    <section class="pages">
      <!-- SEND PAGE -->
      <div class="page active" id="page-send">
        <div class="page-card">
          <div class="page-title">Send</div>
          <div class="page-sub">
            Ichki balansdan do‚Äòstga yoki kartaga pul yuborish (demo).
          </div>
          <div class="pill-row">
            <span class="pill good">0% AiSend komissiya (demo)</span>
            <span class="pill">Bank komissiyasi keyingi bosqichda qo‚Äòshiladi</span>
          </div>
          <div class="field">
            <label for="sendFromCur">Qayerdan</label>
            <select id="sendFromCur">
              <option value="UZS">UZS balans</option>
              <option value="KZT">KZT balans</option>
            </select>
          </div>
          <div class="field">
            <label for="sendToType">Qayerga</label>
            <select id="sendToType">
              <option value="user">AiSend foydalanuvchisi (username)</option>
              <option value="card">Karta raqami</option>
            </select>
          </div>
          <div class="field">
            <label for="sendToValue">Kimga / karta</label>
            <input id="sendToValue" type="text" placeholder="@username yoki karta raqami" />
          </div>
          <div class="field">
            <label for="sendAmount">Miqdor</label>
            <input id="sendAmount" type="number" inputmode="numeric" placeholder="Miqdor" />
          </div>
          <div class="field">
            <label for="sendNote">Izoh (ixtiyoriy)</label>
            <input id="sendNote" type="text" placeholder="Masalan: ‚ÄúUyga pul‚Äù" />
          </div>
          <button class="btn" id="sendBtn">Yuborishni tasdiqlash</button>
          <div class="info-line" id="sendInfo">Demo: hech qanday real o‚Äòtkazma amalga oshirilmaydi.</div>
          <div class="info-error" id="sendError"></div>
        </div>
      </div>
<!-- EXCHANGE PAGE -->
      <div class="page" id="page-exchange">
        <div class="page-card">
          <div class="page-title">Exchange</div>
          <div class="page-sub">
            UZS balansi ichida KZT balansga va aksincha o‚Äòtkazish (ichki 1% komissiya demo).
          </div>
          <div class="pill-row">
            <span class="pill good">1% ichki exchange komissiya (demo)</span>
            <span class="pill">Real kurslar keyinchalik API orqali</span>
          </div>
          <div class="field">
            <label for="exFromCur">Qayerdan</label>
            <select id="exFromCur">
              <option value="UZS">UZS balans</option>
              <option value="KZT">KZT balans</option>
            </select>
          </div>
          <div class="field">
            <label for="exToCur">Qayerga</label>
            <select id="exToCur">
              <option value="KZT">KZT balans</option>
              <option value="UZS">UZS balans</option>
            </select>
          </div>
          <div class="field">
            <label for="exAmount">Miqdor</label>
            <input id="exAmount" type="number" inputmode="numeric" placeholder="Miqdor" />
          </div>
          <button class="btn" id="exCalcBtn">Hisoblash va tasdiqlash</button>
          <div class="info-line" id="exInfo">
            1 UZS ‚âà 0.04 KZT (demo kurs), 1 KZT ‚âà 25 UZS (demo).
          </div>
          <div class="info-error" id="exError"></div>
        </div>
      </div>

      <!-- CRYPTO PAGE -->
      <div class="page" id="page-crypto">
        <div class="page-card">
          <div class="page-title">Crypto (demo)</div>
          <div class="page-sub">
            Crypto sotib olish / sotish loyihasi. Hozircha faqat UI va demo balans.
          </div>
          <div class="pill-row">
            <span class="pill good">KYC bilan to‚Äòliq litsenziyalangan versiya rejalashtirilgan</span>
            <span class="pill">USDT, BTC, ETH dan boshlash</span>
          </div>
          <div class="field">
            <label>Demo crypto portfel</label>
            <div class="info-line">
              ‚Ä¢ 120.5 USDT  
              <br />
              ‚Ä¢ 0.015 BTC
              <br />
              ‚Ä¢ 0.3 ETH
            </div>
          </div>
          <div class="field">
            <label for="cryptoAction">Amal (demo)</label>
            <select id="cryptoAction">
              <option value="buy">USDT sotib olish (UZS ‚Üí USDT)</option>
              <option value="sell">USDT sotish (USDT ‚Üí UZS)</option>
            </select>
          </div>
          <div class="field">
            <label for="cryptoAmount">Miqdor</label>
            <input id="cryptoAmount" type="number" inputmode="numeric" placeholder="Miqdor" />
          </div>
          <button class="btn-secondary" id="cryptoBtn">Demo hisoblash</button>
          <div class="info-line" id="cryptoInfo">
            Demo: faqat UI va logika. Real birjaga ulanish va litsenziya keyingi bosqichlarda.
          </div>
        </div>
      </div>

      <!-- STOCKS PAGE -->
      <div class="page" id="page-stocks">
        <div class="page-card">
          <div class="page-title">Stocks (demo)</div>
          <div class="page-sub">
            Global bozorlar: S&P 500, tex-aksiyalar, ETF‚Äôlar. Hozircha faqat demo UI.
          </div>
          <div class="pill-row">
            <span class="pill good">Fractional shares (ulushlar) konsepti</span>
            <span class="pill">Portfelni AiSend ichida birlashtirish</span>
          </div>
          <div class="field">
            <label>Demo portfel</label>
            <div class="info-line">
              ‚Ä¢ AAPL ‚Äî 0.3 aksiyaga teng demolar  
              <br />
              ‚Ä¢ TSLA ‚Äî 0.15 aksiya  
              <br />
              ‚Ä¢ S&P 500 ETF ‚Äî 0.5 ulush
            </div>
          </div>
          <div class="field">
            <label for="stockAction">Amal (demo)</label>
            <select id="stockAction">
              <option value="buy">Ulush sotib olish</option>
              <option value="sell">Ulush sotish</option>
            </select>
          </div>
          <div class="field">
            <label for="stockAmount">Miqdor (USD ekv.)</label>
            <input id="stockAmount" type="number" inputmode="numeric" placeholder="Masalan: 50" />
          </div>
          <button class="btn-secondary" id="stockBtn">Demo hisoblash</button>
          <div class="info-line" id="stockInfo">
            Demo: real broker integratsiyasi keyinroq qo‚Äòshiladi.
          </div>
        </div>
      </div>

      <!-- BORDERLESS PAYMENTS PAGE -->
      <div class="page" id="page-borderless">
        <div class="page-card">
          <div class="page-title">Chegarasiz to‚Äòlov (demo)</div>
          <div class="page-sub">
            Masalan, Moskvadan turgan holda Toshkentdagi svet yoki internet uchun to‚Äòlov
            qilish konsepti.
          </div>
          <div class="field">
            <label for="bpCountry">To‚Äòlov davlati</label>
            <select id="bpCountry">
              <option value="UZ">O‚Äòzbekiston (kommunal / mobil)</option>
              <option value="KZ">Qozog‚Äòiston (keyinroq)</option>
            </select>
          </div>
          <div class="field">
            <label for="bpService">Xizmat turi</label>
            <select id="bpService">
              <option value="electric">Elektr energiya</option>
              <option value="internet">Internet provayder</option>
              <option value="mobile">Mobil balans</option>
            </select>
          </div>
          <div class="field">
            <label for="bpAccount">Shartnoma / telefon raqam</label>
            <input id="bpAccount" type="text" placeholder="Masalan: shartnoma raqami yoki +998..." />
          </div>
          <div class="field">
            <label for="bpAmount">Miqdor (UZS ekv.)</label>
            <input id="bpAmount" type="number" inputmode="numeric" placeholder="Miqdor" />
          </div>
          <button class="btn" id="bpBtn">Demo hisoblash</button>
          <div class="info-line" id="bpInfo">
            Demo: rubldan UZSga konvertatsiya + lokal operatorga to‚Äòlov keyingi bosqichlarda
            amalga oshiriladi.
          </div>
        </div>
      </div>
    </section>

    <p class="footer-note">
      AiSend ¬∑ demo versiya. UI/UX, logika va mahsulot g‚Äòoyasi ustida ishlash uchun.
    </p>
  </div>

  <!-- PROFILE MODAL -->
  <div class="modal-bg" id="profileModalBg">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">Telegram profil (demo)</div>
        <div class="modal-close" id="profileModalClose">‚úï</div>
      </div>
      <div class="modal-row">
        <label>Ism:</label>
        <span id="pf_name">-</span>
      </div>
      <div class="modal-row">
        <label>ID:</label>
        <span id="pf_id">-</span>
      </div>
      <div class="modal-row">
        <label>Username:</label>
        <span id="pf_username">-</span>
      </div>
    </div>
  </div>
<script>
    // ==== DEMO BALANSLAR (faqat front-end) ====
    const demoState = {
      fiatUzs: 1_500_000, // UZS
      fiatKzt: 80_000,    // KZT
      cryptoUsdt: 120.5,
      stocksUsd: 230.0,
    };

    const RATES = {
      UZS_KZT: 0.04,
      KZT_UZS: 25,
    };

    function fmt(num, decimals = 2) {
      return Number(num).toLocaleString("uz-UZ", {
        minimumFractionDigits: decimals,
        maximumFractionDigits: decimals,
      });
    }

    function updateBalanceUI() {
      const { fiatUzs, fiatKzt, cryptoUsdt, stocksUsd } = demoState;

      const totalInUzs =
        fiatUzs +
        fiatKzt * RATES.KZT_UZS +
        cryptoUsdt * 14000 + // USDT ‚âà 14k UZS (demo)
        stocksUsd * 14000;

      document.getElementById("totalBalanceDisplay").textContent =
        fmt(totalInUzs, 0);

      document.getElementById("assetFiatUzs").textContent =
        fmt(fiatUzs, 0) + " UZS";

      document.getElementById("assetFiatKzt").textContent =
        fmt(fiatKzt, 0) + " KZT";

      document.getElementById("assetCrypto").textContent =
        fmt(cryptoUsdt, 2) + " USDT";

      document.getElementById("assetStocks").textContent =
        fmt(stocksUsd, 2) + " USD";

      const changeTag = document.getElementById("balanceChangeTag");
      changeTag.textContent = "+2.3% (demo)";
    }

    // ==== PAGE SWITCH ====

    function showPage(pageName) {
      const pages = document.querySelectorAll(".page");
      pages.forEach((p) => {
        if (p.id === "page-" + pageName) p.classList.add("active");
        else p.classList.remove("active");
      });

      const buttons = document.querySelectorAll(".menu-btn");
      buttons.forEach((b) => {
        if (b.dataset.page === pageName) b.classList.add("active");
        else b.classList.remove("active");
      });

      // Borderless tile faqat SEND page ko'rinayotganda ko‚Äòrinadi
      const borderlessCard = document.getElementById("borderlessCard");
      if (pageName === "send") borderlessCard.style.display = "block";
      else borderlessCard.style.display = "none";
    }

    // ==== ASSETS EXPAND ====

    function setupAssetsToggle() {
      const toggle = document.getElementById("assetsToggle");
      const panel = document.getElementById("assetsPanel");
      const arrow = document.getElementById("assetsArrow");
      toggle.addEventListener("click", () => {
        const isActive = panel.classList.toggle("active");
        arrow.textContent = isActive ? "‚ñ≤" : "‚ñº";
      });
    }

    // ==== SEND LOGIKA ====

    function setupSendPage() {
      const sendBtn = document.getElementById("sendBtn");
      const fromCurEl = document.getElementById("sendFromCur");
      const toTypeEl = document.getElementById("sendToType");
      const toValueEl = document.getElementById("sendToValue");
      const amountEl = document.getElementById("sendAmount");
      const noteEl = document.getElementById("sendNote");
      const infoEl = document.getElementById("sendInfo");
      const errEl = document.getElementById("sendError");

      sendBtn.addEventListener("click", () => {
        errEl.textContent = "";
        let amtRaw = amountEl.value.trim();
        if (!amtRaw) {
          errEl.textContent = "Miqdor kiritilmagan.";
          return;
        }
        let amt = parseFloat(amtRaw.replace(",", "."));
        if (isNaN(amt) || amt <= 0) {
          errEl.textContent = "Miqdor noto‚Äòg‚Äòri.";
          return;
        }

        const fromCur = fromCurEl.value; // UZS / KZT
        const toType = toTypeEl.value; // user / card
        const dest = toValueEl.value.trim();
        const note = noteEl.value.trim();

        if (!dest) {
          errEl.textContent = "Kimga yoki karta raqamini kiriting.";
          return;
        }

        // Balansdan yechish (demo)
        if (fromCur === "UZS") {
          if (amt > demoState.fiatUzs) {
            errEl.textContent = "UZS balansi yetarli emas (demo).";
            return;
          }
          demoState.fiatUzs -= amt;
        } else {
          if (amt > demoState.fiatKzt) {
            errEl.textContent = "KZT balansi yetarli emas (demo).";
            return;
          }
          demoState.fiatKzt -= amt;
        }

        updateBalanceUI();

        const destLabel =
          toType === "user" ? "AiSend foydalanuvchisi" : "Karta raqami";

        infoEl.textContent =
          `Demo: ${fmt(amt, 2)} ${fromCur} "${destLabel}" (${dest}) ga yuborildi.` +
          (note ? ` Izoh: "${note}".` : "");
      });
    }

    // ==== EXCHANGE LOGIKA ====

    function setupExchangePage() {
      const fromCurEl = document.getElementById("exFromCur");
      const toCurEl = document.getElementById("exToCur");
      const amtEl = document.getElementById("exAmount");
      const btn = document.getElementById("exCalcBtn");
      const infoEl = document.getElementById("exInfo");
      const errEl = document.getElementById("exError");

      btn.addEventListener("click", () => {
        errEl.textContent = "";

        let amtRaw = amtEl.value.trim();
        if (!amtRaw) {
          errEl.textContent = "Miqdor kiritilmagan.";
          return;
        }
        let amt = parseFloat(amtRaw.replace(",", "."));
        if (isNaN(amt) || amt <= 0) {
          errEl.textContent = "Miqdor noto‚Äòg‚Äòri.";
          return;
        }

        const fromCur = fromCurEl.value;
        const toCur = toCurEl.value;

        if (fromCur === toCur) {
          errEl.textContent = "Qayerdan va qayerga bir xil bo‚Äòlishi mumkin emas.";
          return;
        }

        // Mavjud balansni tekshiramiz
        if (fromCur === "UZS" && amt > demoState.fiatUzs) {
          errEl.textContent = "UZS balansi yetarli emas (demo).";
          return;
        }
        if (fromCur === "KZT" && amt > demoState.fiatKzt) {
          errEl.textContent = "KZT balansi yetarli emas (demo).";
          return;
        }

        let rate =
          fromCur === "UZS" ? RATES.UZS_KZT : RATES.KZT_UZS;
        let rawResult = amt * rate;

        const commission = rawResult * 0.01; // 1%
        let finalResult = rawResult - commission;

        // Balanslarni yangilaymiz (demo)
        if (fromCur === "UZS") {
          demoState.fiatUzs -= amt;
          demoState.fiatKzt += finalResult;
        } else {
          demoState.fiatKzt -= amt;
          demoState.fiatUzs += finalResult;
        }

        updateBalanceUI();

        infoEl.textContent =
          `Demo: ${fmt(amt, 2)} ${fromCur} ‚Üí ${fmt(finalResult, 2)} ${toCur}`
          + ` (1% ichki komissiya ushlab qolindi).`;
      });
    }

    // ==== BORDERLESS PAGE LOGIKA ====

    function setupBorderlessPage() {
      const card = document.getElementById("borderlessCard");
      const btn = document.getElementById("bpBtn");
      const amountEl = document.getElementById("bpAmount");
      const infoEl = document.getElementById("bpInfo");

      card.addEventListener("click", () => {
        showPage("borderless");
      });

      btn.addEventListener("click", () => {
        let raw = amountEl.value.trim();
        if (!raw) {
          infoEl.textContent =
            "Miqdor kiritilmagan. Demo: rubldan UZSga konvertatsiya bu yerda hisoblanadi.";
          return;
        }
        let amt = parseFloat(raw.replace(",", "."));
        if (isNaN(amt) || amt <= 0) {
          infoEl.textContent = "Miqdor noto‚Äòg‚Äòri.";
          return;
        }
        const rub = amt / 140; // demo: 1 RUB ~ 140 UZS
        infoEl.textContent =
          `Demo: taxminan ${fmt(rub, 2)} RUB kartadan olinadi `
          + `va ${fmt(amt, 0)} UZS ekv. kommunalga o‚Äòtadi (komissiyasiz demo).`;
      });
    }

    // ==== SIMPLE DEMO LOGIKA (CRYPTO / STOCKS) ====

    function setupCryptoDemo() {
      const btn = document.getElementById("cryptoBtn");
      const actionEl = document.getElementById("cryptoAction");
      const amtEl = document.getElementById("cryptoAmount");
      const infoEl = document.getElementById("cryptoInfo");

      btn.addEventListener("click", () => {
        let raw = amtEl.value.trim();
        if (!raw) {
          infoEl.textContent =
            "Miqdor kiritilmagan. Demo rejim: faqat UI test qilinyapti.";
          return;
        }
        let amt = parseFloat(raw.replace(",", "."));
        if (isNaN(amt) || amt <= 0) {
          infoEl.textContent = "Miqdor noto‚Äòg‚Äòri.";
          return;
        }

        const act = actionEl.value;
        if (act === "buy") {
          infoEl.textContent =
            `Demo: ${fmt(amt, 2)} UZS ‚Üí USDT konvertatsiyasi UI darajasida tasvirlandi.`;
        } else {
          infoEl.textContent =
            `Demo: ${fmt(amt, 2)} USDT ‚Üí UZS konvertatsiyasi UI darajasida tasvirlandi.`;
        }
      });
    }

    function setupStocksDemo() {
      const btn = document.getElementById("stockBtn");
      const actEl = document.getElementById("stockAction");
      const amtEl = document.getElementById("stockAmount");
      const infoEl = document.getElementById("stockInfo");

      btn.addEventListener("click", () => {
        let raw = amtEl.value.trim();
        if (!raw) {
          infoEl.textContent =
            "Miqdor kiritilmagan. Demo rejimda faqat tasvirlanmoqda.";
          return;
        }
        let amt = parseFloat(raw.replace(",", "."));
        if (isNaN(amt) || amt <= 0) {
          infoEl.textContent = "Miqdor noto‚Äòg‚Äòri.";
          return;
        }

        const act = actEl.value;
        if (act === "buy") {
          infoEl.textContent =
            `Demo: ${fmt(amt, 2)} USD ekv. ulush xaridi UI darajasida tasvirlandi.`;
        } else {
          infoEl.textContent =
            `Demo: ${fmt(amt, 2)} USD ekv. ulush sotilishi UI darajasida tasvirlandi.`;
        }
      });
    }
  </script>
<script>
    // ==== PROFIL / TELEGRAM PARAMS (faqat URL orqali) ====

    function initProfileFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const tgName = params.get("tg_name") || "Guest";
      const tgId = params.get("tg_id") || "-";
      const tgUsername = params.get("tg_username") || "";

      document.getElementById("profileName").textContent = tgName;
      document.getElementById("pf_name").textContent = tgName;
      document.getElementById("pf_id").textContent = tgId;
      document.getElementById("pf_username").textContent =
        tgUsername ? "@" + tgUsername : "-";
    }

    function setupProfileModal() {
      const btn = document.getElementById("profileBtn");
      const bg = document.getElementById("profileModalBg");
      const close = document.getElementById("profileModalClose");

      btn.addEventListener("click", () => {
        bg.classList.add("active");
      });
      close.addEventListener("click", () => {
        bg.classList.remove("active");
      });
      bg.addEventListener("click", (e) => {
        if (e.target === bg) bg.classList.remove("active");
      });
    }

    // ==== MENU BUTTON BINDINGS ====

    function setupMenuButtons() {
      document.getElementById("menuSend").addEventListener("click", () =>
        showPage("send")
      );
      document.getElementById("menuExchange").addEventListener("click", () =>
        showPage("exchange")
      );
      document.getElementById("menuCrypto").addEventListener("click", () =>
        showPage("crypto")
      );
      document.getElementById("menuStocks").addEventListener("click", () =>
        showPage("stocks")
      );
    }

    // ==== INIT ====

    window.addEventListener("load", () => {
      initProfileFromUrl();
      setupProfileModal();
      setupAssetsToggle();
      setupMenuButtons();
      setupSendPage();
      setupExchangePage();
      setupBorderlessPage();
      setupCryptoDemo();
      setupStocksDemo();
      updateBalanceUI();
      // Default SEND sahifasi + borderless tile
      showPage("send");
    });
  </script>
</body>
</html>
